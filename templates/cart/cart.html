{% extends 'cart/base.html' %}
{% load static %}
{% block static %}
    <link rel="stylesheet" href="{% static 'cart/css/cart/cart.css' %}">
{% endblock %}
{% block title %}CART{% endblock %}
{% block content %}
    <div class="payment-wrap">
      <form class="payment-container">
        <article class="paymeny-inner">
          <h1 class="paymeny-title">장바구니</h1>
          <!-- 장바구니에 담은 상품이 있다면 표시 -->
          <section class="section">
            <div class="section-title">
              <h2 class="title-text">내가 담은 상품들</h2>
              <p class="product-count-wrap">
                <span class="product-count">{{ cart_details.count }}건</span>
              </p>
            </div>
            <!-- 상품이 없다면 이 부분의 텍스트 및 버튼 표시 -->
            
            <!-- 상품이 하나라도 있다면 아래의 article 태그 display = block -->
            {% if cart_details %}
                <article class="contents-wrap">
              {% for cart_detail in cart_details %}
                <ul>
                <!-- 장바구니에 담은 상품 리스트 -->
                <li class="product-preview-wrap">
                  <div class="product-preview-container">
                    <div class="product-preview-inner">
                      <h3 class="user-name">{{ cart_detail.lecture.teacher.member.member_name }}</h3>
                      <div class="delivery-condition">{{ cart_detail.date.date }}</div>
                    </div>
                    <hr class="divide" />
{#                    <div class="delivery-note">{{ cart_detail.time }}</div>#}
{#                    {% if cart_detail.kit is not null %}#}
{#                      <div class="delivery-note">{{ cart_detail.kit }}</div>#}
{#                    {% endif %}#}
                  </div>
                  <div class="order-product-info">
                    <figure class="product-preview-image">
                      <img
                        src="{% static 'public/web/images/common/blank-image.png' %}"
{#                      이부분 cart_detail 에 lectureㅇ- 첫번째 이미지#}
                        class="product-image" alt=""
                      />
                    </figure>
                    <div class="product-info-contents">
                      <p class="product-name">
                          {{cart_detail.lecture.lecture_name}}
                      </p>
                      <p class="product-option">
                          {% if cart_detail.kit == 'offline' %}
                            {{ cart_detail.date.date }} | {{ cart_detail.time.time }}
                          {% else %}
                            {{ cart_detail.date.date }} | {{ cart_detail.time.time }} | {{ cart_detail.kit.kit_name }}
                          {% endif %}
                      </p>
                      <div class="product-price">
                        <span class="price-number">{{ cart_detail.lecture.lecture_price}}</span
                        ><span class="won">원</span> &nbsp;
                        <div class="selected-product-count">
                          <span class="sub-count">
                            <img src="{% static 'public/web/images/common/sub.png' %}" alt="" />
                          </span>
                          <button type="button" class="counted-number">
                              {{ cart_detail.quantity }}
                          </button>
                          <span class="add-count">
                            <img src="{% static 'public/web/images/common/add.png' %}" alt="" />
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
              {% endfor %}
            </article>
            {% else %}
              <div class="no-items-wrap">
                  <h1 class="no-items-text">아직 장바구니에 담은 상품이 없어요.</h1>
                  <div class="purchase-link-button-wrap">
                    <a href="/lecture/total/" class="purchase-link-button">강의 바로가기</a>
                  </div>
              </div>
            {% endif %}
          </section>
        </article>
        <!-- 사이드바 -->
        <aside class="sidebar-wrap">
          <article class="sidebar-container">
            <div class="payment-detail-info-wrap">
              <section class="payment-detail-container">
                <div class="payment-datail-title">
                  <h2 class="payment-title-text">결제금액</h2>
                </div>
                <article class="detail-price-wrap">
                  <div class="price-title-text">
                    총 상품 금액<span class="emphasis price">{{ total_price }}</span>원
                  </div>
                  <hr class="line" />
                  <div class="total-price-wrap">
                    <span class="total-text">최종 결제 금액</span>
                    <span class="total-price">{{total_price}}</span>
                  </div>
                  <p class="expected-mileage">
                    <span class="value"> <span>{{'0.08'}}</span> P </span>적립 예정
                  </p>
                </article>
              </section>
            </div>
            <div class="pay-button-wrap">
              <button type="submit" class="summit">바로 구매</button>
            </div>
          </article>
        </aside>
      </form>
    </div>
{% endblock %}
{% block js %}
    <script>
        const eachPrices = document.querySelectorAll('.price-number')
        eachPrices.forEach((eachprice)=>{
           let price = Number(eachprice.textContent)
            console.log(price)
        })
        
    </script>
    <script src="{% static 'cart/js/cart/cart.js' %}"></script>
{% endblock %}
